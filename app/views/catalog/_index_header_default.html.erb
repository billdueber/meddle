<%# header bar for doc items in index view -%>
<div class="documentHeader row">
  <%# main title container for doc partial view
      How many bootstrap columns need to be reserved
      for bookmarks control depends on size.
  -%>
  <% doc_presenter = index_presenter(document) %>
  <% entry = doc_presenter.entry %>

  <% document_actions = capture do %>
    <% # bookmark functions for items/docs              -%>
    <%= render_index_doc_actions document, wrapping_class: "index-document-functions col-sm-3 col-lg-2" %>
  <% end %>

  <h3 class="index_title document-title-heading <%= document_actions.present? ? "col-sm-9 col-lg-10" : "col-md-12" %>">
    <% if counter = document_counter_with_offset(document_counter) %>
      <span class="document-counter">
        <%= t('blacklight.search.documents.counter', counter: counter) %>
      </span>
      <span><%= entry.id %></span>
    <% end %>
    <%= link_to_document document, document_show_link_field(document), counter: counter %>
    (<%= document.fetch('pos_abbrev') %>)

    <% if document.fetch('main_headword') != document.fetch('official_headword') %>
      &mdash; <%= document.fetch('official_headword') %>
    <% end %>
  </h3>

  <div class="search-result def col-md-12">
    <% if document.has_field?("headword") %>
      <div>Also: <%= document.fetch("headword").reject {|x| x == document.fetch('main_headword')}.join(', ') %></div>
    <% end %>
    <% if document.has_field?("orth") %>
      <div>Other forms: <%= document.fetch('orth').join(', ') %></div>
    <% end %>

    <div style="margin-bottom: 1em;"><%= entry.quotes.count %> quotation(s)
      we need to figure out what to
      do with
    </div>
    <% if document.has_field?("definition") %>
      <% if doc_presenter.senses.count == 1 %>
        <div>
          <% sense = doc_presenter.senses.first %>
          <% if sense.has_initial_def? %>
            <%== sense.initial_def %>
          <% end %>
          <% if sense.has_lettered_defs? %>
            <ol type="a">
              <% sense.sub_definitions.each do |subdef| %>
                <li>
                  <%== subdef.definition %>
                </li>
              <% end %>
            </ol>
          <% end %>
        </div>
      <% else %>
        <ol>
          <% doc_presenter.senses.each do |sense| %>
            <li>
              <% if sense.has_initial_def? %>
                <%== sense.initial_def %>
              <% end %>
              <% if sense.has_lettered_defs? %>
                <ol type="a">
                  <% sense.sub_definitions.each do |subdef| %>
                    <li>
                      <%== subdef.definition %>
                    </li>
                  <% end %>
                </ol>
              <% end %>
            </li>
          <% end %>
        </ol>
      <% end %>

    <% end %>

  </div>



  <%= document_actions %>
</div>
