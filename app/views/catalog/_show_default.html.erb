<% #doc_presenter = show_presenter(document) %>
<% doc_presenter = index_presenter(document) %>
<% ent = doc_presenter.entry %>

<%# default partial to display solr document fields in catalog show view -%>
<div class="entry-panel">
  
  <%# Display Heading for MED Entry %>
  <h2 class="entry-title" style="background-color: #E6F3FF; color: blue; height: 40px;">Middle English Dictionary Entry</h2>

  <%# Get headword and display it with quotes hide/show %>
  <div class="entry-heading">
      <div class="entry-headword" style="float: left; font-weight: bold;"><%= ent.original_headwords.first %>&nbsp;(<span class="entry-pos"><%= ent.pos_raw %>)</span></div>
      <div class="quotations-header-options"  style="float: right;">Quotations:  <a href="">Show All</a> <a href="">Hide All</a></div>
  </div>

  <%# Get get forms and etymology and display %>
  <div>
      <h3 style="margin-top: 40px;">Entry Info</h3>
  </div>

  <div class="table-responsive entry-info">
    <table class="table">
      <tr><td class="forms-title">Forms</td><td class="forms-list"><% ent.all_forms.each_with_index do |(k, v)|  %><%= k %><%= "," if k != ent.all_forms.last %>&nbsp;&nbsp;<% end %></td></tr>
      <tr><td class="etymology-title">Etymology</td><td class="etymology-list">
          <% etym_xml = Nokogiri::XML(ent.etym_xml) %>
          <% etym_xslt = Nokogiri::XSLT(File.read('./indexer/xslt/EtymOnly.xsl'))%>
          <% current_etym = etym_xslt.apply_to(etym_xml) %>
          <%== current_etym %>
      </td></tr>
    </table>
  </div>

  <%# Get get senses plus their quotes and display %>
  <h3 style="margin-top: 40px;">Senses and Subsenses</h3>

  <div class="table-responsive entry-senses">
    <table class="table">
        <% ent.senses.each do |sen|  %>
            <tr>
                <td>
                	<span class="senses-index"><%= sen.sense_number %>.</span>&nbsp;
                	<span class="senses-defintion">
                  <% def_xml = Nokogiri::XML(sen.definition_xml) %>
                  <% def_xslt = Nokogiri::XSLT(File.read('./indexer/xslt/DefOnly.xsl'))%>
                  <% current_def = def_xslt.apply_to(def_xml) %>
                  <%== current_def %>
                </span>
                <% quote_index = "(a)" %>
                <% quote_link = "<a href=''>Quote link here</a>" %>
                <% quote_xml = "Quotes will go here!" %>
                <% quote_2 = "Second quote for (a) will go here!" %>
                <div class="quote" id="quote_id"><%== quote_index %>&nbsp;<%== quote_link %>&nbsp;<%== quote_xml %></div>
                <div class="quote" id="quote_id"><%== quote_link %>&nbsp;<%== quote_2 %></div>
              	</td>
              <td><a href=''>Hide Quotation</a></td>
          	</tr>
        	<% end %>
    </table>
  </div>

  <%# Get supplement and display %>
  <% sups = ent.instance_variable_get(:@supplements) %>
  <% show_sups = true %>
  <% show_sups = ! sups.nil? %>
  <% show_sups = ! sups.empty? if show_sups %>

  <% if show_sups %>
    <h3 style="margin-top: 40px;">Supplemental Notes</h3>

    <div class="table-responsive entry-supliment">
      <table class="table">
          <% sups.each do |sup|  %>
            <tr>
                <td><%== sup.instance_variable_get(:@notes).first  %></td>
          	</tr>
          <% end %>
      </table>
    </div>
  <% end %>

</div>
